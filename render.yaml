services:
  # 1. Le Site Web (Frontend)
  - type: web
    name: crypto-sim-frontend
    env: static
    buildCommand: npm install && npm run build
    staticPublishPath: ./dist
    branch: main

  # 2. Le Bot (Backend Worker)
  - type: web
    name: crypto-sim-bot
    env: node
    region: frankfurt
    plan: free
    buildCommand: npm install && npm install -D tsx
    startCommand: npm run bot
    branch: main
    healthCheckPath: /
    envVars:
      - key: NODE_VERSION
        value: 20.10.0

  # 3. Le Terminal Bot (Interface Séparée)
  - type: web
    name: cryptosim-bot-terminal
    env: static
    buildCommand: cd bot-terminal && npm install && npm run build
    staticPublishPath: ./bot-terminal/dist
    branch: main
